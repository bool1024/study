<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<link rel="stylesheet" type="text/css" href="file:///${exe}/scripts/highlight.styles/${SyntaxHighlightStyleName}.css" />
		<style>
			body, table{font-family: 微软雅黑}
			
			table{border-collapse: collapse; border: 1px solid gray; border-width: 2px 1px 2px 1px;}
			th{border: 1px solid gray; padding: 4px; background-color: #ddd;}
			td{border: 1px solid gray; padding: 4px;}
			tr:nth-child(2n){background-color: #f8f8f8;}
			pre{border: 2px solid #d6d6d6; padding: 0px; border-radius: 3px;}
		</style>
	</head>
	<body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">
		<div>
			<div>需要引用jackson-core.jar包
			</div>
			<pre>
<code id="ID_16328CAB609" class="lang-java hljs"><ol><li><span class="hljs-keyword">try</span> {</li><li>    JsonFactory jsonFactory = <span class="hljs-keyword">new</span> JsonFactory();</li><li>    Writer wt = <span class="hljs-keyword">new</span> StringWriter();</li><li>    FileOutputStream outputStream = <span class="hljs-keyword">new</span> FileOutputStream(<span class="hljs-string">"d:\\test.json"</span>);</li><li>      </li><li>    <span class="hljs-comment">//JsonGenerator jsonGenerator = jsonFactory.createGenerator(outputStream, JsonEncoding.UTF8);</span></li><li>    JsonGenerator jsonGenerator = jsonFactory.createGenerator(wt);</li><li>    jsonGenerator.writeStartObject();</li><li>      </li><li>    jsonGenerator.writeObjectFieldStart(<span class="hljs-string">"notification"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"event-time"</span>, <span class="hljs-string">"2018-04-03"</span>);</li><li>    jsonGenerator.writeObjectFieldStart(<span class="hljs-string">"message"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"topic"</span>, <span class="hljs-string">"cmcc-resources"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"operation"</span>, <span class="hljs-string">"post"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"object-type"</span>, <span class="hljs-string">"NEL"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"version"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"target"</span>, <span class="hljs-string">"huawei-nce-NetworkElement:NetworkElements/NetworkElement=141564"</span>);</li><li>    jsonGenerator.writeObjectFieldStart(<span class="hljs-string">"content"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"rmUID"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"nativeName"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"location"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"productName"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"vendor"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"reality"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"IPAddress"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"hardwareVersion"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"softwareVersion"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"state"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"neType"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"onermUID"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeStringField(<span class="hljs-string">"OperationType"</span>, <span class="hljs-string">"v1"</span>);</li><li>    jsonGenerator.writeEndObject();</li><li>      </li><li>    wt.close();</li><li>    jsonGenerator.flush();</li><li>    jsonGenerator.close();</li><li>    System.out.println(wt.toString());</li><li>} <span class="hljs-keyword">catch</span> (IOException e) {</li><li><span class="hljs-comment"><span class="Apple-style-span" style="color: rgb(68, 68, 68);">    </span>// TODO Auto-generated catch block</span></li><li>    e.printStackTrace();</li><li>}</li></ol></code></pre>
			<div><br />
			</div>
		</div>
		<div>生成的json数据格式为：
		</div>
		<div>
			<pre>
<code id="ID_16328CD3E00" class="lang-json hljs">{
  <span class="hljs-attr">"notification"</span>: {
    <span class="hljs-attr">"event-time"</span>: <span class="hljs-string">"2018-04-03"</span>,
    <span class="hljs-attr">"message"</span>: {
      <span class="hljs-attr">"topic"</span>: <span class="hljs-string">"cmcc-resources"</span>,
      <span class="hljs-attr">"operation"</span>: <span class="hljs-string">"post"</span>,
      <span class="hljs-attr">"object-type"</span>: <span class="hljs-string">"NEL"</span>,
      <span class="hljs-attr">"version"</span>: <span class="hljs-string">"v1"</span>,
      <span class="hljs-attr">"target"</span>: <span class="hljs-string">"huawei-nce-NetworkElement:NetworkElements/NetworkElement=141564"</span>,
      <span class="hljs-attr">"content"</span>: {
        <span class="hljs-attr">"rmUID"</span>: <span class="hljs-string">"v1"</span>,
        <span class="hljs-attr">"nativeName"</span>: <span class="hljs-string">"v1"</span>,
        <span class="hljs-attr">"location"</span>: <span class="hljs-string">"v1"</span>,
        <span class="hljs-attr">"productName"</span>: <span class="hljs-string">"v1"</span>,
        <span class="hljs-attr">"vendor"</span>: <span class="hljs-string">"v1"</span>,
        <span class="hljs-attr">"reality"</span>: <span class="hljs-string">"v1"</span>,
        <span class="hljs-attr">"IPAddress"</span>: <span class="hljs-string">"v1"</span>,
        <span class="hljs-attr">"hardwareVersion"</span>: <span class="hljs-string">"v1"</span>,
        <span class="hljs-attr">"softwareVersion"</span>: <span class="hljs-string">"v1"</span>,
        <span class="hljs-attr">"state"</span>: <span class="hljs-string">"v1"</span>,
        <span class="hljs-attr">"neType"</span>: <span class="hljs-string">"v1"</span>,
        <span class="hljs-attr">"onermUID"</span>: <span class="hljs-string">"v1"</span>,
        <span class="hljs-attr">"OperationType"</span>: <span class="hljs-string">"v1"</span>
      }
    }
  }
}</code></pre>
			<div><br />
			</div>
			<div><br />
			</div>
			<div>创建多对象的数组型Json数据：
			</div>
			<div>
				<pre>
<code id="ID_1638B0740A2" class="lang-java hljs"><ol><li><span class="hljs-keyword">package</span> com.cmcc.omc_service.restserver;</li><li></li><li><span class="hljs-keyword">import</span> java.io.File;</li><li><span class="hljs-keyword">import</span> java.io.IOException;</li><li><span class="hljs-keyword">import</span> java.io.StringWriter;</li><li></li><li><span class="hljs-keyword">import</span> com.fasterxml.jackson.core.JsonFactory;</li><li><span class="hljs-keyword">import</span> com.fasterxml.jackson.core.JsonGenerator;</li><li><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.JsonNode;</li><li><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</li><li></li><li><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span></span></li><li>{</li><li>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span></span></li><li>    {</li><li>        ObjectMapper mapper = <span class="hljs-keyword">new</span> ObjectMapper();</li><li>        JsonFactory jsonFactory = <span class="hljs-keyword">new</span> JsonFactory();</li><li>        StringWriter wt = <span class="hljs-keyword">new</span> StringWriter();</li><li>        </li><li>        <span class="hljs-keyword">try</span></li><li>        {</li><li>            JsonGenerator jsonGenerator = jsonFactory.createGenerator(wt);</li><li>            JsonNode tree = mapper.readTree(<span class="hljs-keyword">new</span> File(<span class="hljs-string">"d:/test.json"</span>));</li><li>            jsonGenerator.writeStartObject();</li><li>            <span class="hljs-keyword">if</span>(tree.get(<span class="hljs-string">"nativeName"</span>) != <span class="hljs-keyword">null</span>)</li><li>            {</li><li>                jsonGenerator.writeStringField(<span class="hljs-string">"name"</span>, tree.get(<span class="hljs-string">"nativeName"</span>).textValue());</li><li>            }</li><li>            <span class="hljs-keyword">if</span>(tree.get(<span class="hljs-string">"bandWidth"</span>) != <span class="hljs-keyword">null</span>)</li><li>            {</li><li>                jsonGenerator.writeNumberField(<span class="hljs-string">"bandWidth"</span>, Integer.valueOf(tree.get(<span class="hljs-string">"bandWidth"</span>).toString()));</li><li>            }</li><li>            <span class="hljs-keyword">if</span>(tree.get(<span class="hljs-string">"routeConstraint"</span>) != <span class="hljs-keyword">null</span>)</li><li>            {</li><li>                JsonNode node = tree.get(<span class="hljs-string">"routeConstraint"</span>);</li><li>                jsonGenerator.writeArrayFieldStart(<span class="hljs-string">"routeConstraint"</span>);</li><li>                jsonGenerator.writeStartObject();</li><li>                <span class="hljs-keyword">if</span>(node.get(<span class="hljs-string">"index"</span>) != <span class="hljs-keyword">null</span> &amp;&amp; node.get(<span class="hljs-string">"index"</span>).intValue() &gt; <span class="hljs-number">0</span> &amp;&amp; node.get(<span class="hljs-string">"index"</span>).intValue() &lt; <span class="hljs-number">20</span>)</li><li>                {</li><li>                    jsonGenerator.writeNumberField(<span class="hljs-string">"index"</span>, node.get(<span class="hljs-string">"index"</span>).intValue());</li><li>                }</li><li>                <span class="hljs-keyword">if</span>(node.get(<span class="hljs-string">"roleType"</span>) != <span class="hljs-keyword">null</span>)</li><li>                {</li><li>                    jsonGenerator.writeStringField(<span class="hljs-string">"roleType"</span>, node.get(<span class="hljs-string">"roleType"</span>).textValue());</li><li>                }</li><li>                <span class="hljs-keyword">if</span>(node.get(<span class="hljs-string">"routeType"</span>) != <span class="hljs-keyword">null</span>)</li><li>                {</li><li>                    jsonGenerator.writeStringField(<span class="hljs-string">"routeType"</span>, node.get(<span class="hljs-string">"routeType"</span>).textValue());</li><li>                }</li><li>                <span class="hljs-keyword">if</span>(node.get(<span class="hljs-string">"rmUIDType"</span>) != <span class="hljs-keyword">null</span>)</li><li>                {</li><li>                    jsonGenerator.writeStringField(<span class="hljs-string">"fdnType"</span>, node.get(<span class="hljs-string">"rmUIDType"</span>).textValue());</li><li>                }</li><li>                <span class="hljs-keyword">if</span>(node.get(<span class="hljs-string">"rmUID"</span>) != <span class="hljs-keyword">null</span>)</li><li>                {</li><li>                    jsonGenerator.writeStringField(<span class="hljs-string">"fdn"</span>, node.get(<span class="hljs-string">"rmUID"</span>).textValue());</li><li>                }</li><li>                jsonGenerator.writeEndObject();</li><li>                jsonGenerator.writeEndArray();</li><li>                jsonGenerator.writeEndObject();</li><li>                wt.close();</li><li>                jsonGenerator.flush();</li><li>                jsonGenerator.close();</li><li>                System.out.println(wt.toString());</li><li>            }</li><li>        }</li><li>        <span class="hljs-keyword">catch</span> (IOException e)</li><li>        {</li><li>            e.printStackTrace();</li><li>        }</li><li>    }</li><li>}</li></ol></code></pre>
				<div>test.json数据如下：
				</div>
			</div>
			<div>
				<pre>
<code id="ID_1638B07CBE1" class="lang-json hljs"><ol><li>{</li><li>    <span class="hljs-attr">"nativeName"</span>: <span class="hljs-string">"nativeName"</span>,</li><li>    <span class="hljs-attr">"routeConstraint"</span>: {</li><li>        <span class="hljs-attr">"index"</span>: <span class="hljs-number">8</span>,</li><li>        <span class="hljs-attr">"roleType"</span> : <span class="hljs-literal">null</span>,</li><li>        <span class="hljs-attr">"routeType"</span>: <span class="hljs-literal">null</span>,</li><li>        <span class="hljs-attr">"rmUIDType"</span>: <span class="hljs-literal">null</span>,</li><li>        <span class="hljs-attr">"rmUID"</span>: <span class="hljs-literal">null</span></li><li>    },</li><li>    <span class="hljs-attr">"bandWidth"</span>: <span class="hljs-number">12</span></li><li>}</li></ol></code></pre>
				<div>输出如下：
				</div>
			</div>
			<div>
				<div><span style="font-family: Consolas; font-size: 12pt">{&quot;name&quot;:&quot;nativeName&quot;,&quot;bandWidth&quot;:12,&quot;routeConstraint&quot;:[{&quot;index&quot;:8,&quot;roleType&quot;:null,&quot;routeType&quot;:null,&quot;fdnType&quot;:null,&quot;fdn&quot;:null}]}</span>
				</div>
			</div>
		</div>
	</body>
</html>
