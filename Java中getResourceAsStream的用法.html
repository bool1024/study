<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<link rel="stylesheet" type="text/css" href="file:///${exe}/scripts/highlight.styles/${SyntaxHighlightStyleName}.css" />
		<style>
			body, table{font-family: 微软雅黑}
			
			table{border-collapse: collapse; border: 1px solid gray; border-width: 2px 1px 2px 1px;}
			th{border: 1px solid gray; padding: 4px; background-color: #ddd;}
			td{border: 1px solid gray; padding: 4px;}
			tr:nth-child(2n){background-color: #f8f8f8;}
			pre{border: 2px solid #d6d6d6; padding: 0px; border-radius: 3px;}
		</style>
	</head>
	<body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">
		<div><span style="font-size: large; font-weight: bold;">首先，Java中的getResourceAsStream有以下几种：</span>
		</div>
		<div>
			<ol>
				<li>Class.getResourceAsStream(String path)：path不以“/”开头时默认是此类所在的包下取资源，以“/”开头则是从ClassPath根下获取。其知识通过path构造一个绝对路径，最终还是由ClassLoader获取资源。
				</li>
				<li>Class.getClassLoader().getResourceAsStream(String path)：默认则是从ClassPath根下获取，path不能以“/”开头，最终是由ClassLoader获取资源。
				</li>
				<li>ServletContext.getResourceAsStream(String path)：默认从WebApp根目录下获取资源，Tomcat下path是否以“/”开头无所谓，当然这和具体的容器实现有关。
				</li>
				<li>Jsp下的application内置对象就是上面的ServletContext的一种实现
				</li>
			</ol>
			<div><br />
			</div>
			<div><span style="font-size: 13.5pt"><strong>其次，getResourceAsStream用法大致有以下几种：</strong></span>
			</div>
			<div>
				<ol>
					<li>要加载的文件和.class文件在同一目录下，例如com.x.y下有类me.class，同时有资源文件file.xml，那么，应该有如下代码：
						<pre>
<code id="ID_16300C848F6" class="lang-java hljs">me.class.getResourceAsStream(<span class="hljs-string">"file.xml"</span>);</code></pre>
					</li>
					<li>在me.class目录的子目录下，例如com.x.y下有类me.class，同时在com.x.y.file目录下有资源文件file.xml，那么，应该有如下代码：
						<pre>
<code id="ID_16300CA3BE7" class="lang-java hljs">me.class.getResourceAsStream(<span class="hljs-string">"file/file.xml"</span>);</code></pre>
					</li>
					<li>不在me.class目录下，也不再子目录下，例如com.x.y下有类me.class，同时在com.x.file目录下有资源文件file.xml，那么，应该有如下代码：
						<pre>
<code id="ID_16300CC16C7" class="lang-java hljs">me.class.getResourceAsStream(<span class="hljs-string">"/com/x/file/file.xml"</span>);</code></pre>
						<div><br />
						</div>
					</li>
				</ol>
				<div><span style="font-size: 13.5pt"><strong>总结，一共有两种写法：</strong></span>
				</div>
				<div>
					<ol>
						<li>前面有&quot;/&quot;，&quot;/&quot;代表工程根目录
						</li>
						<li>前面没有&quot;/&quot;，代表当前类的目录
						</li>
					</ol>
					<div>getResourceAsStream读取的文件路径只局限于工程的源文件夹中，包括在工程src根目录下，以及类里面任何位置，但是如果配置文件路径是在除了源文件夹之外的其他文件夹中时，该方法是用不了的
					</div>
				</div>
				<div><br />
				</div>
				<div><br />
				</div>
				<div><span style="font-size: 13.5pt"><strong>问题</strong></span>
				</div>
				<div>Maven工程可能会遇到NullPointException，因为真正执行时读取的文件并不是代码源文件路径，而是target路径下的打包后的文件，可以修改打包策略来解决
				</div>
			</div>
		</div>
	</body>
</html>
